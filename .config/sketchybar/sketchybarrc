#!/bin/bash

# Tokyo Night color scheme to match your theme
export BG_PRIMARY=0xff1a1b26
export BG_SECONDARY=0xff24283b
export FG_PRIMARY=0xffc0caf5
export FG_SECONDARY=0xffa9b1d6
export ACCENT=0xff7aa2f7
export HIGHLIGHT=0xffbb9af7
export RED=0xfff7768e
export GREEN=0xff9ece6a
export YELLOW=0xffe0af68

# General bar appearance
sketchybar --bar \
  height=32 \
  position=top \
  sticky=on \
  padding_left=10 \
  padding_right=10 \
  color=$BG_PRIMARY \
  shadow=off \
  blur_radius=30 \
  margin=0 \
  y_offset=0

# Default item settings
sketchybar --default \
  updates=when_shown \
  icon.font="JetBrainsMono Nerd Font:Bold:14.0" \
  icon.color=$FG_PRIMARY \
  icon.padding_left=4 \
  icon.padding_right=4 \
  label.font="JetBrainsMono Nerd Font:Medium:13.0" \
  label.color=$FG_PRIMARY \
  label.padding_left=4 \
  label.padding_right=4 \
  background.padding_left=4 \
  background.padding_right=4 \
  background.height=24 \
  background.corner_radius=6

# Left side - AeroSpace workspaces
for i in {1..5}; do
  sketchybar --add item space.$i left \
    --set space.$i \
      icon=$i \
      icon.highlight_color=$ACCENT \
      background.color=$BG_SECONDARY \
      background.drawing=on \
      label.drawing=off \
      script="$HOME/.config/sketchybar/plugins/aerospace.sh $i" \
    --subscribe space.$i aerospace_workspace_change
done

# Separator
sketchybar --add item separator_left left \
  --set separator_left \
    icon="" \
    icon.font="JetBrainsMono Nerd Font:Regular:16.0" \
    background.drawing=off \
    label.drawing=off \
    icon.color=$FG_SECONDARY

# Front app
sketchybar --add item front_app left \
  --set front_app \
    icon.drawing=off \
    background.color=$BG_SECONDARY \
    script="$HOME/.config/sketchybar/plugins/front_app.sh" \
  --subscribe front_app front_app_switched

# Right side - System info
# Clock
sketchybar --add item clock right \
  --set clock \
    update_freq=10 \
    icon= \
    icon.color=$ACCENT \
    background.color=$BG_SECONDARY \
    script="$HOME/.config/sketchybar/plugins/clock.sh"

# Battery
sketchybar --add item battery right \
  --set battery \
    update_freq=120 \
    icon.color=$GREEN \
    background.color=$BG_SECONDARY \
    script="$HOME/.config/sketchybar/plugins/battery.sh" \
  --subscribe battery system_woke power_source_change

# Volume
sketchybar --add item volume right \
  --set volume \
    icon= \
    icon.color=$YELLOW \
    background.color=$BG_SECONDARY \
    script="$HOME/.config/sketchybar/plugins/volume.sh" \
  --subscribe volume volume_change

# Finalize
sketchybar --update
