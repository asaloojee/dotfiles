#!/bin/bash

# Tokyo Night color scheme to match your theme
export BG_PRIMARY=0xff1a1b26
export BG_SECONDARY=0xff24283b
export FG_PRIMARY=0xffc0caf5
export FG_SECONDARY=0xffa9b1d6
export ACCENT=0xff7aa2f7
export HIGHLIGHT=0xffbb9af7
export RED=0xfff7768e
export GREEN=0xff9ece6a
export YELLOW=0xffe0af68

# General bar appearance
sketchybar --bar \
  height=36 \
  position=top \
  sticky=on \
  padding_left=12 \
  padding_right=12 \
  color=$BG_PRIMARY \
  shadow=off \
  blur_radius=30 \
  margin=0 \
  y_offset=0

# Default item settings
sketchybar --default \
  updates=when_shown \
  icon.font="JetBrainsMono Nerd Font:Bold:14.0" \
  icon.color=$FG_PRIMARY \
  icon.padding_left=4 \
  icon.padding_right=4 \
  label.font="JetBrainsMono Nerd Font:Medium:13.0" \
  label.color=$FG_PRIMARY \
  label.padding_left=4 \
  label.padding_right=4 \
  background.padding_left=4 \
  background.padding_right=4 \
  background.height=24 \
  background.corner_radius=6

# Left side - AeroSpace workspaces
sketchybar --add event aerospace_workspace_change

for i in {1..5}; do
  sketchybar --add item space.$i left \
    --set space.$i \
    icon=$i \
    icon.font="sketchybar-app-font:Regular:16.0" \
    icon.highlight_color=$ACCENT \
    icon.padding_left=8 \
    icon.padding_right=8 \
    label.font="JetBrainsMono Nerd Font:Medium:13.0" \
    label.drawing=off \
    background.color=$BG_SECONDARY \
    background.border_color=$BG_SECONDARY \
    background.border_width=2 \
    background.corner_radius=6 \
    background.height=26 \
    background.drawing=off \
    script="$HOME/.config/sketchybar/plugins/aerospace.sh $i" \
    --subscribe space.$i aerospace_workspace_change front_app_switched
done

# Right side - System info
# Clock
sketchybar --add item clock right \
  --set clock \
  update_freq=10 \
  icon= \
  icon.color=$ACCENT \
  icon.padding_left=10 \
  icon.padding_right=10 \
  background.color=$BG_SECONDARY \
  background.padding_left=6 \
  background.padding_right=6 \
  script="$HOME/.config/sketchybar/plugins/clock.sh"

# Battery
sketchybar --add item battery right \
  --set battery \
  update_freq=120 \
  icon= \
  icon.color=$GREEN \
  icon.padding_left=10 \
  icon.padding_right=10 \
  background.color=$BG_SECONDARY \
  background.padding_left=6 \
  background.padding_right=6 \
  script="$HOME/.config/sketchybar/plugins/battery.sh" \
  --subscribe battery system_woke power_source_change

# Finalize
sketchybar --update
